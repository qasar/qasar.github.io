---
layout: default		
permalink: /photos/
title: Photos - Qasar Younis
description: "Photography is not like painting...you must know with intuition when to click the camera." -HCB
image: /assets-photo2026/nuns.jpg
---		
<script>		
var imageGallery = [		
{% if site.local_dev %}
{% assign base_url = "" %}
{% else %}
{% assign base_url = site.url %}
{% endif %}
	"{{ base_url }}/assets-photo2026/nuns.jpg",
	"{{ base_url }}/assets-photo2026/7.jpg",
	"{{ base_url }}/assets-photo2026/iguazu.jpg",
	"{{ base_url }}/assets-photo2026/room.jpg",
	"{{ base_url }}/assets-photo2026/masi.jpg",
	"{{ base_url }}/assets-photo2026/ephesus.jpg",
	"{{ base_url }}/assets-photo2026/hk.jpg",
	"{{ base_url }}/assets-photo2026/japan.jpg",
	"{{ base_url }}/assets-photo2026/pyramids.jpg",
	"{{ base_url }}/assets-photo2026/airchina.jpg",
	"{{ base_url }}/assets-photo2026/pak.jpg",
	"{{ base_url }}/assets-photo2026/ghana.jpg",
	"{{ base_url }}/assets-photo2026/tan.jpg",
	"{{ base_url }}/assets-photo2026/met.jpg",
	"{{ base_url }}/assets-photo2026/camera.jpeg",

	
];		
	
		
var imageText = [		
"<em>If you look for the bad in people expecting to find it, you surely will.</em>&nbsp;&nbsp;‑&nbsp;Abraham Lincoln",
"<em>I am Time. The destroyer of all. I have come to consume you.</em>&nbsp;&nbsp;‑&nbsp;Bhagavad&nbsp;Gita",
"<em>When I admire the wonder of a sunset, my soul expands in worship of the Creator.</em>&nbsp;&nbsp;‑&nbsp;Mahatma&nbsp;Gandhi",
"<em>I am not who you think I am; I am not who I think I am; I am who I think you think I am.</em>&nbsp;&nbsp;‑&nbsp;Thomas&nbsp;Cooley",
"<em>I am by nature war-like. To attack is my instinct.</em>&nbsp;&nbsp;‑&nbsp;Friedrich&nbsp;Nietzsche",
"<em>Enjoy the little things, for one day you may look back and realize they were the big things.</em>&nbsp;&nbsp;‑&nbsp;Robert&nbsp;Brault",
"<em>If you think you're free, there's no escape possible.</em>&nbsp;&nbsp;‑&nbsp;Ram&nbsp;Dass",
"<em>By protecting others, you save yourself.</em>&nbsp;&nbsp;‑&nbsp;Seven&nbsp;Samurai,&nbsp;Akira&nbsp;Kurosawa",
"<em>My name is Ozymandias, king of kings; look on my works, ye Mighty, and despair!</em>&nbsp;&nbsp;‑&nbsp;Percy&nbsp;Shelley",
"<em>Hope is the worst of all evils for it prolongs the torments of man.</em>&nbsp;&nbsp;‑&nbsp;Friedrich&nbsp;Nietzsche",
"<em>We shall not cease from exploration, and the end of all our exploring, will be to arrive where we started, and know the place for the first time.</em>&nbsp;&nbsp;‑&nbsp;T.&nbsp;S.&nbsp;Eliot",
"<em>Under capitalism, man exploits man. Under communism, it's just the opposite.</em>&nbsp;&nbsp;‑&nbsp;John&nbsp;Kenneth&nbsp;Galbraith",
"<em>It is no measure of health to be well adjusted to a profoundly sick society.</em>&nbsp;&nbsp;‑&nbsp;Krishnamurti",
"<em>Those who seek absolute power, even though they seek it to do what they regard as good, are simply demanding the right to enforce their own version of heaven on earth. And let me remind you, they are the very ones who always create the most hellish tyrannies. Absolute power does corrupt, and those who seek it must be suspect and must be opposed.</em>&nbsp;&nbsp;‑&nbsp;Barry&nbsp;Goldwater",
"This is a collection of photos I've taken over the years. Lightroom says I have taken over 50,000 photos. To say this is curated is an understatement. The quotes I've attached to the photos are often related, but not always.<br><br>I now shoot with a Leica M11-P, but not a single photo in this set was taken with that camera. Almost all the photos are from when I used a Fujifilm X100S, which I shot with for over a decade. Though I've also used a Canon Rebel XT, Nikon Z9, Contax T2, Ricoh GR II, and of course, whatever phone I have.<br><br>In another life, I would have loved to be a Magnum photographer. My favorite photographers are Josef Koudelka (Exiles), Sebastião Salgado (Workers), Fred Herzog (Modern Color), Marie-Laure de Decker (Self titled), Fan Ho (Hong Kong Yesterday), and of course, Henri Cartier-Bresson (The Decisive Moment).<br><br>If you're starting in photography, copy them. After that, I don't know what to do because I'm still on that step.<br><br>Qasar Younis<br>January 2025"

	
];		
	

var locations = [		
	"Salar de Uyuni (2024)",
	"Sahara (2011)",
	"Iguazu Falls (2009)",
	"Boston (2007)",
	"Masai Mara (2007)",
	"Ephesus (2010)",
	"Hong Kong (2016)",
	"Tokyo (2022)",
	"Giza (2007)",
	"Shanghai (2016)",
	"Rawalpindi (2022)",
	"Elmina (2008)",
	"Fez (2011)",
	"Ljubljana (2016)",
	"",

	
];		
	
	
	
	
var imgCount = 0;		
var totalImgs = imageGallery.length -1;		

function preloadImages(startIndex) {
  // Preload images starting from startIndex (to avoid duplicate preloading)
  startIndex = startIndex || 0;
  for (var i = startIndex; i < imageGallery.length; i++) {
    // Skip index 14 (15th image) if we're preloading from index 10, since it's already preloaded immediately
    if (i === 14 && startIndex < 14) {
      continue;
    }
    var img = new Image();
    img.src = imageGallery[i];
  }
}
		
	
function updatePhotoStyle() {
    var galleryImg = document.getElementById("gallery");
    var imageTextDiv = document.getElementById("imageText");
    // 15th photo is at index 14 (0-indexed)
    if (imgCount === 14) {
        galleryImg.classList.add("explanatory-photo");
        imageTextDiv.classList.add("explanatory-text");
    } else {
        galleryImg.classList.remove("explanatory-photo");
        imageTextDiv.classList.remove("explanatory-text");
    }
    // Update viewport-aware sizing when style changes
    setTimeout(function() { if (typeof updateImageMaxHeight === 'function') updateImageMaxHeight(); }, 50);
}

function next() {
    if(imgCount == totalImgs){		
      imgCount = 0;		
    }  else {		
      imgCount++;		
    }		
    var galleryImg = document.getElementById("gallery");
    // For the 15th image, use the preloaded image object if available to avoid re-decoding
    if (imgCount === 14 && window.preloadedCameraImg && window.preloadedCameraImg.complete) {
      // Hide image during transition
      galleryImg.style.visibility = 'hidden';
      galleryImg.style.opacity = '0';
      // Use the preloaded image's src (already decoded)
      galleryImg.src = window.preloadedCameraImg.src;
      // Since it's already loaded, show it immediately
      galleryImg.style.visibility = 'visible';
      galleryImg.style.opacity = '1';
    } else {
      // Check if image is already in browser cache by creating a test image
      var testImg = new Image();
      testImg.onload = function() {};
      testImg.src = imageGallery[imgCount];
      // Hide image during transition to prevent flash - use visibility for instant hide
      galleryImg.style.visibility = 'hidden';
      galleryImg.style.opacity = '0';
      galleryImg.src = imageGallery[imgCount];
    }		
   document.getElementById("locationsText").innerHTML = locations[imgCount];	
   document.getElementById("imageText").innerHTML = imageText[imgCount];
   // Handle blockquote quote for 15th image
   var imageQuoteDiv = document.getElementById("imageQuote");
   if (imgCount === 14) {
     imageQuoteDiv.style.display = "block";
     imageQuoteDiv.innerHTML = "<em>Photography is not like painting. There is a creative fraction of a second when you are taking a picture. Your eye must see a composition or an expression that life itself offers you, and you must know with intuition when to click the camera.</em>&nbsp;&nbsp;‑&nbsp;Henri&nbsp;Cartier-Bresson";
   } else {
     imageQuoteDiv.style.display = "none";
     imageQuoteDiv.innerHTML = "";
   }
	document.getElementById('currentImage').innerHTML = imgCount + 1
	updatePhotoStyle();
    // Smart pre-caching: Prefetch adjacent images
    prefetchAdjacentImages(imgCount);
    // Show image when it loads (only if we didn't use preloaded image)
    if (imgCount !== 14 || !window.preloadedCameraImg || !window.preloadedCameraImg.complete) {
        if (galleryImg.complete) {
            galleryImg.style.visibility = 'visible';
            galleryImg.style.opacity = '1';
            // Update viewport-aware sizing after image is shown
            setTimeout(function() { if (typeof updateImageMaxHeight === 'function') updateImageMaxHeight(); }, 50);
        } else {
            galleryImg.onload = function() {
                this.style.visibility = 'visible';
                this.style.opacity = '1';
                this.onload = null; // Remove handler after use
                // Update viewport-aware sizing after image loads
                setTimeout(function() { if (typeof updateImageMaxHeight === 'function') updateImageMaxHeight(); }, 50);
            };
        }
    } else {
        // Update viewport-aware sizing for preloaded image
        setTimeout(function() { if (typeof updateImageMaxHeight === 'function') updateImageMaxHeight(); }, 50);
    }
}		
	
function previous() {
    imgCount--;		
  if(imgCount < 0) imgCount = totalImgs ;		
    var galleryImg = document.getElementById("gallery");
    // For the 15th image, use the preloaded image object if available to avoid re-decoding
    if (imgCount === 14 && window.preloadedCameraImg && window.preloadedCameraImg.complete) {
      // Hide image during transition
      galleryImg.style.visibility = 'hidden';
      galleryImg.style.opacity = '0';
      // Use the preloaded image's src (already decoded)
      galleryImg.src = window.preloadedCameraImg.src;
      // Since it's already loaded, show it immediately
      galleryImg.style.visibility = 'visible';
      galleryImg.style.opacity = '1';
    } else {
      // Hide image during transition to prevent flash - use visibility for instant hide
      galleryImg.style.visibility = 'hidden';
      galleryImg.style.opacity = '0';
      galleryImg.src = imageGallery[imgCount];
    }  		
       document.getElementById("locationsText").innerHTML = locations[imgCount];	
       document.getElementById("imageText").innerHTML = imageText[imgCount];
       // Handle blockquote quote for 15th image
       var imageQuoteDiv = document.getElementById("imageQuote");
       if (imgCount === 14) {
         imageQuoteDiv.style.display = "block";
         imageQuoteDiv.innerHTML = "<em>Photography is not like painting. There is a creative fraction of a second when you are taking a picture. Your eye must see a composition or an expression that life itself offers you, and you must know with intuition when to click the camera.</em>&nbsp;&nbsp;‑&nbsp;Henri&nbsp;Cartier-Bresson";
       } else {
         imageQuoteDiv.style.display = "none";
         imageQuoteDiv.innerHTML = "";
       }
	       document.getElementById('currentImage').innerHTML = imgCount + 1
	       updatePhotoStyle();
    // Smart pre-caching: Prefetch adjacent images
    prefetchAdjacentImages(imgCount);
    // Show image when it loads (only if we didn't use preloaded image)
    if (imgCount !== 14 || !window.preloadedCameraImg || !window.preloadedCameraImg.complete) {
        if (galleryImg.complete) {
            galleryImg.style.visibility = 'visible';
            galleryImg.style.opacity = '1';
            // Update viewport-aware sizing after image is shown
            setTimeout(function() { if (typeof updateImageMaxHeight === 'function') updateImageMaxHeight(); }, 50);
        } else {
            galleryImg.onload = function() {
                this.style.visibility = 'visible';
                this.style.opacity = '1';
                this.onload = null; // Remove handler after use
                // Update viewport-aware sizing after image loads
                setTimeout(function() { if (typeof updateImageMaxHeight === 'function') updateImageMaxHeight(); }, 50);
            };
        }
    } else {
        // Update viewport-aware sizing for preloaded image
        setTimeout(function() { if (typeof updateImageMaxHeight === 'function') updateImageMaxHeight(); }, 50);
    }

    }
		
document.addEventListener("keydown", function(e){		
	console.log(e.keyCode)		
	if (e.keyCode == 37) {		
		previous()		
	} else if (e.keyCode == 39) {		
		next()		
	}		
});		

	
function handlePhotoClick(event, img) {
        var posX = event.offsetX?(event.offsetX):event.pageX-img.offsetLeft;
        var posY = event.offsetY?(event.offsetY):event.pageY-img.offsetTop;
        if (posX > img.width / 2) {
          next()
        } else {
          previous()
        }
}
	
	
</script>		
{% include nav.html %}		
<style>
/* Photo2026 specific styles - 1200px max-width, responsive, left-aligned */
/* Override .list max-width constraint - scoped to photo2026 only */
/* CRITICAL: Remove .content padding-left: 40px that's causing overflow */
/* Make container responsive so it scales with viewport */
#photolist.list,
.content.list#photolist,
.list#photolist {
    max-width: 1200px !important;
    width: 100% !important; /* Scale with viewport instead of fixed 1200px */
    text-align: left !important;
    margin-left: 0 !important;
    margin-right: auto !important;
    padding-left: 0 !important; /* Remove 40px padding from .content */
    padding-right: 1.5rem !important; /* Add right padding so image doesn't touch viewport edge */
}

/* Override original #gallerycontainer width: 600px */
/* Make container responsive so it scales with viewport */
#photolist #gallerycontainer {
    max-width: 1200px !important;
    width: 100% !important; /* Scale with viewport instead of fixed 1200px */
    text-align: left !important;
    float: left !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    margin-bottom: 0 !important;
    margin-top: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    padding-bottom: 0 !important;
    padding-top: 0 !important;
    box-sizing: border-box !important;
}

/* Remove any spacing from buttons container */
#photolist #gallerycontainer .buttons {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
}

/* Override original #gallery max-height: 500px */
/* Add 2 line breaks spacing between navigation buttons and photo */
/* Viewport-aware sizing: scale to fit both width and height constraints */
/* Image will scale down if either width (1200px) or height (viewport) constraint is exceeded */
#photolist #gallery {
    max-width: 1200px !important;
    width: 100% !important; /* Scale with container so it responds to viewport width */
    min-width: 0 !important; /* Remove fixed min-width to allow scaling */
    max-height: var(--gallery-max-height, calc(100vh - 200px)) !important; /* Use CSS variable for JS override, fallback to calc */
    height: auto !important;
    object-fit: contain !important; /* Maintain aspect ratio - CSS will scale to whichever constraint is more restrictive */
    display: block !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    margin-top: 2em !important; /* 2 line breaks between navigation and photo */
    margin-bottom: 1.6rem !important; /* One line of spacing below photo */
    padding-left: 0 !important;
    padding-right: 0 !important;
    border: 0 !important;
    outline: 0 !important;
    float: none !important;
    clear: both !important;
    box-sizing: border-box !important;
}

/* Hide locations text and remove all spacing */
#photolist #locationsText {
    display: none !important;
    margin: 0 !important;
    padding: 0 !important;
    height: 0 !important;
    line-height: 0 !important;
}

/* Make buttons container match photo width exactly so counter aligns to right edge */
/* Make responsive so it scales with viewport */
#photolist #gallerycontainer .buttons,
#photolist .buttons {
    max-width: 1200px !important;
    width: 100% !important; /* Scale with viewport instead of fixed 1200px */
    box-sizing: border-box !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    overflow: visible !important;
}

/* Center the quote text below photos - override style.scss rules */
/* Fixed height so images stay in same vertical position regardless of quote length */
/* Match photo width so quote is centered under photo */
/* Ensure quote is always visible with proper spacing */
#photolist #imageText,
#photolist #gallerycontainer #imageText,
.content.list#photolist #imageText {
    text-align: center !important;
    max-width: 1200px !important;
    width: 100% !important; /* Scale with viewport instead of fixed 1200px */
    display: block !important; /* Use block for natural text flow */
    visibility: visible !important;
    opacity: 1 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    margin-top: 0.5em !important; /* Small positive margin to ensure visibility */
    margin-bottom: 2rem !important; /* Add bottom margin for white space below quote */
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    height: 90px !important;
    min-height: 90px !important;
    line-height: 1.5 !important;
    box-sizing: border-box !important;
    position: relative !important;
    top: 0 !important;
}

/* Style blockquote quote for 15th image - match writings page blockquote style */
#photolist #imageQuote,
#photolist #gallerycontainer #imageQuote,
.content.list#photolist #imageQuote {
    border-left: 3px solid #e5e5e5 !important;
    padding-left: 1.5rem !important;
    font-style: italic !important;
    color: #666 !important;
    margin-top: 0.5em !important; /* Match #imageText margin-top */
    margin-bottom: 1.5rem !important; /* Space before explanatory text */
    margin-left: 0 !important;
    margin-right: 0 !important;
    max-width: 1200px !important;
    width: 100% !important;
    text-align: left !important; /* Left-align like writings page blockquotes */
    box-sizing: border-box !important;
}

/* Style blockquote for explanatory photo - 75% of explanatory text width (44.6% of container) */
/* Blockquote is only shown for 15th image, so make it slightly narrower than explanatory text */
#photolist #imageQuote,
#photolist #gallerycontainer #imageQuote,
.content.list#photolist #imageQuote {
    width: 44.6% !important; /* 75% of 59.5% (explanatory text width) */
    max-width: 44.6% !important;
    margin-left: auto !important;
    margin-right: auto !important;
}

/* AGGRESSIVE: Remove ALL spacing from gallery image bottom */
/* CRITICAL: Override style.scss max-height: 500px rule, use viewport-aware height */
#photolist #gallery,
#photolist #gallerycontainer #gallery {
    margin-bottom: 1.6rem !important;
    padding-bottom: 0 !important;
    vertical-align: bottom !important;
    display: block !important;
    line-height: 0 !important;
    max-height: var(--gallery-max-height, calc(100vh - 200px)) !important; /* Use CSS variable for JS override, fallback to calc */
}

/* Responsive: only scale down on screens smaller than 1200px */
/* Viewport-aware sizing for medium screens */
@media (max-width: 1200px) {
    #photolist #gallerycontainer {
        width: 100% !important;
        max-width: 100% !important;
    }
    #photolist #gallerycontainer .buttons,
    #photolist .buttons {
        width: 100% !important;
        max-width: 100% !important;
    }
    #photolist #gallery {
        width: 100% !important;
        max-width: 100% !important;
        min-width: 0 !important; /* Remove fixed min-width for responsiveness */
        max-height: var(--gallery-max-height, calc(100vh - 200px)) !important; /* Use CSS variable for JS override, fallback to calc */
    }
    #photolist #imageText {
        width: 100% !important;
        max-width: 100% !important;
    }
}

/* Mobile responsive styles - override all fixed widths for proper mobile display */
@media (max-width: 850px) {
    /* Override fixed 1200px width on main container */
    #photolist.list,
    .content.list#photolist,
    .list#photolist {
        width: 100% !important;
        max-width: 100% !important;
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }

    /* Make gallery container responsive with padding */
    #photolist #gallerycontainer {
        width: 100% !important;
        max-width: 100% !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
        box-sizing: border-box !important;
    }

    /* Make buttons container responsive */
    #photolist #gallerycontainer .buttons,
    #photolist .buttons {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
    }

    /* Make images fully responsive - remove min-width constraint */
    /* Viewport-aware height for mobile to ensure image + quote fit */
    #photolist #gallery,
    #photolist #gallerycontainer #gallery {
        width: 100% !important;
        max-width: 100% !important;
        min-width: 0 !important; /* Critical: remove 1200px min-width */
        max-height: var(--gallery-max-height, calc(100vh - 180px)) !important; /* Use CSS variable for JS override, fallback to calc */
        height: auto !important;
        object-fit: contain !important;
        display: block !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        margin-top: 2em !important;
        margin-bottom: 0 !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
        box-sizing: border-box !important;
    }

    /* Fix quote text wrapping - remove flex display and fixed dimensions */
    #photolist #imageText,
    #photolist #gallerycontainer #imageText,
    .content.list#photolist #imageText,
    div#photolist.content.list #gallerycontainer #imageText,
    div#photolist #gallerycontainer #imageText,
    #photolist.content.list #gallerycontainer #imageText {
        width: 100% !important;
        max-width: 100% !important;
        display: block !important; /* Change from flex to block for natural wrapping */
        text-align: center !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        margin-top: 1em !important; /* Add some spacing from image */
        margin-bottom: 2rem !important; /* Add bottom margin for white space below quote */
        padding-top: 0 !important;
        padding-bottom: 0 !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
        height: auto !important; /* Allow natural height for wrapping */
        min-height: auto !important;
        line-height: 1.5 !important;
        white-space: normal !important; /* Ensure text wraps */
        box-sizing: border-box !important;
        position: relative !important;
        top: 0 !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
}
</style>
<div class="content list" id="photolist">		
<div id="gallerycontainer">		
<div class="buttons">		
<a href="#" onclick="previous(); return false;">Back</a> |		
<a href="#" onclick="next(); return false;">Next</a>
	<span style="float:right; color: #aaa;"> <span id="currentImage">0</span> of <span id="totalImages">5</span></span>

	
	
</div>		

{% if site.local_dev %}
{% assign base_url = "" %}
{% else %}
{% assign base_url = site.url %}
{% endif %}
<img id="gallery" onclick="handlePhotoClick(event, this)" src="{{ base_url }}/assets-photo2026/nuns.jpg" loading="eager" decoding="async" fetchpriority="high" width="2400" height="1600"><div id="locationsText" style="display: none;">Salar de Uyuni (2024)</div><blockquote id="imageQuote" style="display: none;"></blockquote><div id="imageText">
<em>The secret source of humour itself is not joy, but sorrow. There is no humour in heaven.</em>&nbsp;&nbsp;‑&nbsp;Mark&nbsp;Twain
</div>    	
</div>		
</div>


<script>
// Initialize first image quote and location on page load
// Add image load event listener to track when images finish loading
var galleryImg = document.getElementById("gallery");
// Ensure image is visible on initial load
galleryImg.style.visibility = 'visible';
galleryImg.style.opacity = '1';
galleryImg.addEventListener('load', function() {
    // Ensure image is visible after load (in case it was hidden during transition)
    if (this.style.opacity === '0' || this.style.opacity === '') {
        this.style.visibility = 'visible';
        this.style.opacity = '1';
    }
});
galleryImg.addEventListener('error', function() {
    // Show image even on error to prevent blank screen
    this.style.visibility = 'visible';
    this.style.opacity = '1';
});
document.getElementById('imageText').innerHTML = imageText[0];
document.getElementById('locationsText').innerHTML = locations[0];
// Initialize blockquote quote (hidden for first image, only shown for 15th image)
var imageQuoteDiv = document.getElementById("imageQuote");
if (imgCount === 14) {
  imageQuoteDiv.style.display = "block";
  imageQuoteDiv.innerHTML = "<em>Photography is not like painting. There is a creative fraction of a second when you are taking a picture. Your eye must see a composition or an expression that life itself offers you, and you must know with intuition when to click the camera.</em>&nbsp;&nbsp;‑&nbsp;Henri&nbsp;Cartier-Bresson";
} else {
  imageQuoteDiv.style.display = "none";
  imageQuoteDiv.innerHTML = "";
}
document.getElementById('currentImage').innerHTML = imgCount + 1
document.getElementById('totalImages').innerHTML = imageGallery.length
updatePhotoStyle();
// Update viewport-aware sizing after initial setup
setTimeout(function() { if (typeof updateImageMaxHeight === 'function') updateImageMaxHeight(); }, 100);

// Enhanced preloading strategy: multiple tiers for optimal performance
if ('requestIdleCallback' in window) {
  // Tier 1: Preload first 5 images immediately (critical - user will see these first)
  for (var i = 0; i < Math.min(5, imageGallery.length); i++) {
    var img = new Image();
    img.fetchPriority = 'high';
    img.src = imageGallery[i];
  }
  
  // Tier 2: Preload 15th image (explanatory photo) immediately since users often navigate to it
  // Store it in a global variable to prevent garbage collection
  if (imageGallery.length > 14) {
    window.preloadedCameraImg = new Image();
    window.preloadedCameraImg.fetchPriority = 'high';
    window.preloadedCameraImg.src = imageGallery[14];
  }
  
  // Tier 3: Preload next 5 images (indices 5-9) after 1 second delay
  setTimeout(function() {
    for (var i = 5; i < Math.min(10, imageGallery.length); i++) {
      if (i !== 14) { // Skip 15th image, already preloaded
        var img = new Image();
        img.fetchPriority = 'high';
        img.src = imageGallery[i];
      }
    }
  }, 1000);
  
  // Tier 4: Preload remaining images when browser is idle (starting from index 10, skip 14)
  requestIdleCallback(function() {
    preloadImages(10);
  }, { timeout: 2000 });
} else {
  // Fallback: preload all images
  preloadImages(0);
}

// Smart pre-caching: Prefetch adjacent images when viewing a photo
function prefetchAdjacentImages(currentIndex) {
  var prefetchIndices = [];
  // Prefetch previous 2 and next 2 images
  for (var offset = -2; offset <= 2; offset++) {
    if (offset === 0) continue; // Skip current image
    var idx = currentIndex + offset;
    if (idx >= 0 && idx < imageGallery.length) {
      prefetchIndices.push(idx);
    }
  }
  
  prefetchIndices.forEach(function(idx) {
    // Check if already prefetched to avoid duplicates
    var existingLink = document.querySelector('link[rel="prefetch"][href="' + imageGallery[idx] + '"]');
    if (!existingLink) {
      var link = document.createElement('link');
      link.rel = 'prefetch';
      link.as = 'image';
      link.href = imageGallery[idx];
      document.head.appendChild(link);
    }
  });
}

// Viewport-aware image sizing: Dynamically calculate max-height and max-width based on actual viewport
// This ensures image + quote + navigation always fit without scrolling
// Image will scale to whichever constraint (width or height) is more restrictive
function updateImageMaxHeight() {
  var galleryImg = document.getElementById("gallery");
  var imageTextDiv = document.getElementById("imageText");
  var buttonsDiv = document.querySelector("#photolist .buttons");
  var photolistContainer = document.getElementById("photolist");
  var sidebar = document.querySelector('.masthead');
  
  if (!galleryImg) return;
  
  // Get actual viewport dimensions
  var viewportHeight = window.innerHeight;
  var viewportWidth = window.innerWidth;
  
  // Calculate available height: navigation buttons, quote, margins, and bottom padding
  var buttonsHeight = buttonsDiv ? buttonsDiv.offsetHeight : 40; // Fallback to 40px if not found
  var quoteHeight = imageTextDiv ? imageTextDiv.offsetHeight : 90; // Fallback to 90px if not found
  var imageMarginTop = 32; // 2em margin-top on image
  var quoteMarginTop = 8; // 0.5em margin-top on quote
  var quoteMarginBottom = 32; // 2rem bottom margin for white space below quote
  var extraPadding = 20; // Safety padding
  
  // Calculate available height for image
  var availableHeight = viewportHeight - buttonsHeight - quoteHeight - imageMarginTop - quoteMarginTop - quoteMarginBottom - extraPadding;
  
  // Ensure minimum height (at least 200px)
  availableHeight = Math.max(availableHeight, 200);
  
  // Calculate available width: viewport width minus sidebar, margins, and right padding
  var sidebarWidth = sidebar ? sidebar.offsetWidth : 193; // Default sidebar width from CSS
  var rightPadding = 24; // 1.5rem right padding on photolist container
  var extraWidthPadding = 20; // Safety padding
  var availableWidth = viewportWidth - sidebarWidth - rightPadding - extraWidthPadding;
  
  // Cap at 1200px max (design constraint)
  availableWidth = Math.min(availableWidth, 1200);
  
  // Ensure minimum width (at least 200px)
  availableWidth = Math.max(availableWidth, 200);
  
  // Apply calculated max-height using CSS custom property (works with !important)
  if (photolistContainer) {
    photolistContainer.style.setProperty('--gallery-max-height', availableHeight + 'px', 'important');
    // Also set max-width if we want to constrain it further (though CSS max-width: 1200px should handle this)
    // The image with width: 100% will scale with container, and max-height will constrain vertically
    // CSS object-fit: contain will ensure it fits within both constraints
  } else {
    // Fallback: set directly on image (may not override !important)
    galleryImg.style.maxHeight = availableHeight + 'px';
  }
}

// Update image height on load, resize, and orientation change
function initViewportSizing() {
  updateImageMaxHeight();
  window.addEventListener('resize', updateImageMaxHeight);
  window.addEventListener('orientationchange', function() {
    setTimeout(updateImageMaxHeight, 100); // Delay for orientation change to complete
  });
}

// Initialize viewport sizing when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initViewportSizing);
} else {
  initViewportSizing();
}
</script>

<style>
/* FINAL OVERRIDE - Load last to ensure it wins */
/* Ensure quote is always visible with proper spacing - maximum specificity */
div#photolist.content.list #gallerycontainer #imageText,
div#photolist #gallerycontainer #imageText,
#photolist.content.list #gallerycontainer #imageText {
    margin-top: 0.5em !important; /* Small positive margin to ensure visibility */
    margin-bottom: 2rem !important; /* Add bottom margin for white space below quote */
    visibility: visible !important;
    opacity: 1 !important;
    display: block !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
}

/* Ensure image has zero bottom spacing */
/* CRITICAL: Override style.scss max-height: 500px rule, use viewport-aware height */
div#photolist.content.list #gallerycontainer #gallery,
div#photolist #gallerycontainer #gallery {
    margin-bottom: 1.6rem !important;
    padding-bottom: 0 !important;
    display: block !important;
    vertical-align: bottom !important;
    max-height: var(--gallery-max-height, calc(100vh - 200px)) !important; /* Use CSS variable for JS override, fallback to calc */
}

/* CRITICAL: Mobile override for "FINAL OVERRIDE" section - must come after to override */
/* Override negative margin and flex display on mobile to prevent quote overlap and enable wrapping */
@media (max-width: 850px) {
    /* Override "FINAL OVERRIDE" section's negative margin and flex display on mobile */
    /* Use same high-specificity selectors to ensure override */
    div#photolist.content.list #gallerycontainer #imageText,
    div#photolist #gallerycontainer #imageText,
    #photolist.content.list #gallerycontainer #imageText {
        margin-top: 1em !important; /* Positive margin to add spacing from image (override -10px) */
        display: block !important; /* Block display for natural wrapping (override flex) */
        white-space: normal !important; /* Ensure text wraps naturally */
        width: 100% !important; /* Full width on mobile */
        max-width: 100% !important;
        height: auto !important; /* Allow natural height for wrapping */
        min-height: auto !important;
        line-height: 1.5 !important;
        text-align: center !important;
        font-size: 0.7em !important; /* Reduce font size on mobile (10.5px from base 15px - about 12.5% smaller) */
        overflow-wrap: break-word !important; /* Break long words if needed, prefer breaking at spaces */
        word-break: normal !important; /* Don't break words unnecessarily */
        hyphens: auto !important; /* Allow hyphenation for better word breaking */
        text-wrap: balance !important; /* Balance line lengths - break text roughly in middle for 2-line quotes */
        -webkit-text-wrap: balance !important; /* Safari support for balanced text wrapping */
    }
    
    /* Mobile responsive for blockquote - 75% of explanatory text width (75% of container on mobile) */
    #photolist #imageQuote,
    #photolist #gallerycontainer #imageQuote,
    .content.list#photolist #imageQuote {
        width: 75% !important; /* 75% of 100% (explanatory text width on mobile) */
        max-width: 75% !important;
    }
}

/* Smooth opacity transition for image loading */
/* Ensure image is always visible and never hidden (but allow opacity transitions) */
#photolist #gallery,
#photolist #gallerycontainer #gallery,
div#photolist.content.list #gallerycontainer #gallery {
    transition: opacity 0.2s ease-in-out !important;
    display: block !important; /* Ensure image is always displayed */
    /* visibility and opacity are controlled by JavaScript for transitions */
}

/* Special styling for 15th photo (explanatory photo) - 59.5% width and centered */
/* Viewport-aware height for explanatory photo */
#photolist #gallery.explanatory-photo,
#photolist #gallerycontainer #gallery.explanatory-photo,
div#photolist.content.list #gallerycontainer #gallery.explanatory-photo {
    width: 59.5% !important;
    max-width: 59.5% !important;
    min-width: 0 !important;
    max-height: var(--gallery-max-height, calc(100vh - 200px)) !important; /* Use CSS variable for JS override, fallback to calc */
    margin-left: auto !important;
    margin-right: auto !important;
}

/* Adjust text styling for explanatory text - allow natural wrapping */
#photolist #imageText.explanatory-text,
#photolist #gallerycontainer #imageText.explanatory-text,
div#photolist.content.list #gallerycontainer #imageText.explanatory-text {
    width: 59.5% !important;
    max-width: 59.5% !important;
    margin-left: auto !important;
    margin-right: auto !important;
    display: block !important; /* Change from flex to block for natural wrapping */
    height: auto !important; /* Allow natural height */
    min-height: auto !important;
    white-space: normal !important;
    text-align: left !important; /* Left-align for readability of longer text */
    margin-top: 1.5em !important; /* Add spacing from photo */
    line-height: 1.6 !important; /* Slightly more line height for readability */
    padding-left: 0 !important;
    padding-right: 0 !important;
}

/* Mobile responsive for explanatory photo */
@media (max-width: 850px) {
    #photolist #gallery.explanatory-photo,
    #photolist #gallerycontainer #gallery.explanatory-photo,
    div#photolist.content.list #gallerycontainer #gallery.explanatory-photo {
        width: 100% !important;
        max-width: 100% !important;
        max-height: var(--gallery-max-height, calc(100vh - 180px)) !important; /* Use CSS variable for JS override, fallback to calc */
    }
    
    #photolist #imageText.explanatory-text,
    #photolist #gallerycontainer #imageText.explanatory-text,
    div#photolist.content.list #gallerycontainer #imageText.explanatory-text {
        width: 100% !important;
        max-width: 100% !important;
    }
}

/* Very small viewports - ensure everything fits */
@media (max-height: 600px) {
    #photolist #gallery,
    #photolist #gallerycontainer #gallery,
    div#photolist.content.list #gallerycontainer #gallery {
        max-height: var(--gallery-max-height, calc(100vh - 150px)) !important; /* Use CSS variable for JS override, fallback to calc */
    }
    
    #photolist #imageText,
    #photolist #gallerycontainer #imageText,
    div#photolist.content.list #gallerycontainer #imageText {
        height: auto !important;
        min-height: auto !important;
        font-size: 0.9em !important; /* Slightly smaller font on very small viewports */
    }
}
</style>

